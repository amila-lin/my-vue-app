import{d as w,r as a,az as b,p as h,c as n,o as u,a as d,K as c,J as y,ak as f,O as i}from"./vue-5klyxRfl.js";import{s as v}from"./index-ux22gBrD.js";import"./elementPlus-DS8GmrEa.js";const _={class:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900"},k={class:"w-full max-w-sm p-8 bg-white dark:bg-gray-800 rounded shadow"},M={key:0,class:"space-y-4"},V=["disabled"],B={key:1,class:"text-red-500 text-sm text-center mt-4"},C={key:2,class:"text-green-500 text-sm text-center mt-4"},N=w({__name:"ResetPasswordView",setup(P){const o=a(""),r=a(!1),e=a(""),l=a(""),p=a(!1),m=b();h(async()=>{const{data:s,error:t}=await v.auth.getSession();s.session||(e.value="重設連結無效或已過期。請重新從信件中點擊連結。")});const g=async()=>{r.value=!0,e.value="",l.value="";const{error:s}=await v.auth.updateUser({password:o.value});s?e.value=s.message:(p.value=!0,l.value="密碼更新成功！即將跳轉到登入頁...",setTimeout(()=>{m.push("/login")},2e3)),r.value=!1};return(s,t)=>(u(),n("div",_,[d("div",k,[t[1]||(t[1]=d("h2",{class:"text-2xl font-bold text-center text-gray-800 dark:text-white mb-6"}," 重設密碼 ",-1)),p.value?c("",!0):(u(),n("div",M,[y(d("input",{"onUpdate:modelValue":t[0]||(t[0]=x=>o.value=x),type:"password",placeholder:"輸入新密碼",class:"w-full px-4 py-2 border rounded bg-white dark:bg-gray-700 text-black dark:text-white placeholder-gray-400"},null,512),[[f,o.value]]),d("button",{onClick:g,disabled:r.value||!o.value,class:"w-full py-2 px-4 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50"},i(r.value?"更新中...":"更新密碼"),9,V)])),e.value?(u(),n("p",B,i(e.value),1)):c("",!0),l.value?(u(),n("p",C,i(l.value),1)):c("",!0)])]))}});export{N as default};
