import{f as j,n as N,p as P}from"./elementPlus-tPvvSRko.js";import{d as U,r as b,w as S,c as R,Q as l,al as f,u as I,I as m,o as V,b as $,X as T,H as z,M as k,a as p,P as A,a6 as W,O as g,K as E,D as B,n as L}from"./vue-BqyYyVhM.js";import{_ as F}from"./index-ChIKHqJ_.js";const J={class:"flex space-x-4 mb-4 flex-wrap"},K=U({__name:"FilterBar",props:{keyword:{},type:{},dateRange:{}},emits:["update:keyword","update:type","update:dateRange"],setup(C,{emit:v}){const a=C,s=v,r=b(a.keyword),t=b(a.type),n=b(a.dateRange),w={minWidth:"200px",flexGrow:1,maxWidth:"300px"};S(()=>a.keyword,e=>{r.value=e}),S(()=>a.type,e=>{t.value=e}),S(()=>a.dateRange,e=>{n.value=e});const x=()=>{s("update:keyword",r.value),s("update:type",t.value),s("update:dateRange",n.value)},i=j(x,300);return(e,c)=>{const u=f("el-input"),o=f("el-option"),d=f("el-select"),D=f("el-date-picker");return V(),R("div",J,[l(u,{modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=_=>r.value=_),placeholder:"搜尋摘要或備註",clearable:"",style:w,onInput:I(i)},null,8,["modelValue","onInput"]),l(d,{modelValue:t.value,"onUpdate:modelValue":c[1]||(c[1]=_=>t.value=_),placeholder:"全部類型",clearable:"",style:w,onChange:x},{default:m(()=>[l(o,{label:"支出",value:"支出"}),l(o,{label:"收入",value:"收入"})]),_:1},8,["modelValue"]),l(D,{modelValue:n.value,"onUpdate:modelValue":c[2]||(c[2]=_=>n.value=_),type:"daterange","range-separator":"至","start-placeholder":"開始日期","end-placeholder":"結束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","unlink-panels":"",clearable:"",style:w,onChange:x},null,8,["modelValue"])])}}}),G=F(K,[["__scopeId","data-v-28073934"]]),H={class:"flex justify-end gap-2"},Q=U({__name:"AccountFormDialog",props:{modelValue:{type:Boolean},record:{}},emits:["update:modelValue","save"],setup(C,{emit:v}){const a=C,s=v,r=$({get:()=>a.modelValue,set:i=>s("update:modelValue",i)}),t=T({id:Date.now(),date:new Date().toISOString().split("T")[0],summary:"",type:"支出",amount:0,note:""}),n=$(()=>!!a.record);S(()=>a.record,i=>{i?Object.assign(t,{...i}):Object.assign(t,{id:Date.now(),date:new Date().toISOString().split("T")[0],summary:"",type:"支出",amount:0,note:""})},{immediate:!0});const w=()=>{s("save",{...t}),r.value=!1},x=()=>{r.value=!1};return(i,e)=>{const c=f("el-date-picker"),u=f("el-form-item"),o=f("el-input"),d=f("el-radio"),D=f("el-radio-group"),_=f("el-input-number"),Y=f("el-form"),M=f("el-button"),O=f("el-dialog");return V(),z(O,{modelValue:r.value,"onUpdate:modelValue":e[5]||(e[5]=y=>r.value=y),title:n.value?"編輯記帳":"新增記帳",width:"500px",onClose:x},{footer:m(()=>[p("div",H,[l(M,{onClick:x},{default:m(()=>e[8]||(e[8]=[k("取消")])),_:1,__:[8]}),l(M,{type:"primary",onClick:w},{default:m(()=>e[9]||(e[9]=[k("儲存")])),_:1,__:[9]})])]),default:m(()=>[l(Y,{model:t,"label-width":"80px",class:"space-y-2"},{default:m(()=>[l(u,{label:"日期"},{default:m(()=>[l(c,{modelValue:t.date,"onUpdate:modelValue":e[0]||(e[0]=y=>t.date=y),type:"date","value-format":"YYYY-MM-DD",placeholder:"選擇日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(u,{label:"摘要"},{default:m(()=>[l(o,{modelValue:t.summary,"onUpdate:modelValue":e[1]||(e[1]=y=>t.summary=y),placeholder:"輸入摘要"},null,8,["modelValue"])]),_:1}),l(u,{label:"類型"},{default:m(()=>[l(D,{modelValue:t.type,"onUpdate:modelValue":e[2]||(e[2]=y=>t.type=y)},{default:m(()=>[l(d,{label:"支出"},{default:m(()=>e[6]||(e[6]=[k("支出")])),_:1,__:[6]}),l(d,{label:"收入"},{default:m(()=>e[7]||(e[7]=[k("收入")])),_:1,__:[7]})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"金額"},{default:m(()=>[l(_,{modelValue:t.amount,"onUpdate:modelValue":e[3]||(e[3]=y=>t.amount=y),min:1,step:10,placeholder:"輸入金額",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(u,{label:"備註"},{default:m(()=>[l(o,{modelValue:t.note,"onUpdate:modelValue":e[4]||(e[4]=y=>t.note=y),type:"textarea",placeholder:"輸入備註",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),X=F(Q,[["__scopeId","data-v-b8105910"]]),q={class:"mt-6 space-y-3"},Z={class:"text-sm text-gray-500"},ee={class:"font-semibold"},te={key:0,class:"text-xs text-gray-400 mt-1"},le={class:"flex space-x-2"},ae={class:"flex justify-center items-center space-x-4 mt-4"},h=10,oe=U({__name:"AccountRecordList",props:{records:{}},emits:["edit","delete"],setup(C){const v=C,a=b(1),s=$(()=>Math.max(1,Math.ceil(v.records.length/h))),r=$(()=>[...v.records].sort((i,e)=>i.date>e.date?-1:i.date<e.date?1:0)),t=$(()=>{const i=(a.value-1)*h;return r.value.slice(i,i+h)});S(()=>v.records.length,()=>{a.value>s.value&&(a.value=s.value)});const n=()=>{a.value>1&&a.value--},w=()=>{a.value<s.value&&a.value++},x=i=>{const c=new Date(i).toLocaleDateString("zh-TW",{weekday:"long"});return`${i}（${c}）`};return(i,e)=>{const c=f("el-button");return V(),R("div",q,[(V(!0),R(A,null,W(t.value,u=>(V(),R("div",{key:u.id,class:"p-4 border rounded shadow-sm bg-white dark:bg-gray-800 dark:border-gray-700 flex justify-between items-center"},[p("div",null,[p("p",Z,g(x(u.date)),1),p("p",ee,[k(g(u.summary)+" ",1),p("span",{class:B({"text-red-500":u.type==="支出","text-green-600":u.type==="收入"})},g(u.type==="支出"?"-":"+")+g(u.amount)+" 元 ",3)]),u.note?(V(),R("p",te," 備註："+g(u.note),1)):E("",!0)]),p("div",le,[l(c,{size:"small",onClick:o=>i.$emit("edit",u)},{default:m(()=>e[0]||(e[0]=[k("編輯")])),_:2,__:[0]},1032,["onClick"]),l(c,{type:"danger",size:"small",onClick:o=>i.$emit("delete",u.id)},{default:m(()=>e[1]||(e[1]=[k(" 刪除 ")])),_:2,__:[1]},1032,["onClick"])])]))),128)),p("div",ae,[l(c,{size:"small",disabled:a.value===1,onClick:n},{default:m(()=>e[2]||(e[2]=[k(" 上一頁 ")])),_:1,__:[2]},8,["disabled"]),p("span",null,"第 "+g(a.value)+" 頁 / 共 "+g(s.value)+" 頁",1),l(c,{size:"small",disabled:a.value===s.value,onClick:w},{default:m(()=>e[3]||(e[3]=[k(" 下一頁 ")])),_:1,__:[3]},8,["disabled"])])])}}}),ne={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4 text-center"},se={class:"p-4 bg-green-50 dark:bg-green-900 rounded shadow"},de={class:"text-xl font-bold text-green-600 dark:text-green-300"},ue={class:"p-4 bg-red-50 dark:bg-red-900 rounded shadow"},re={class:"text-xl font-bold text-red-500 dark:text-red-300"},ie={class:"p-4 bg-blue-50 dark:bg-blue-900 rounded shadow"},pe=U({__name:"AccountSummary",props:{records:{}},setup(C){const v=C,a=$(()=>v.records.filter(t=>t.type==="收入").reduce((t,n)=>t+n.amount,0)),s=$(()=>v.records.filter(t=>t.type==="支出").reduce((t,n)=>t+n.amount,0)),r=$(()=>a.value-s.value);return(t,n)=>(V(),R("div",ne,[p("div",se,[n[0]||(n[0]=p("p",{class:"text-sm text-gray-500"},"總收入",-1)),p("p",de," +"+g(a.value)+" 元 ",1)]),p("div",ue,[n[1]||(n[1]=p("p",{class:"text-sm text-gray-500"},"總支出",-1)),p("p",re," -"+g(s.value)+" 元 ",1)]),p("div",ie,[n[2]||(n[2]=p("p",{class:"text-sm text-gray-500"},"結餘",-1)),p("p",{class:B(["text-xl font-bold",r.value>=0?"text-blue-600 dark:text-blue-300":"text-red-600 dark:text-red-300"])},g(r.value>=0?"+":"")+g(r.value)+" 元 ",3)])]))}}),me={class:"p-4"},ce={class:"flex justify-between items-center mb-4"},_e={class:"flex items-center space-x-2"},ve={key:0,class:"text-gray-500 mt-10 text-center"},xe=U({__name:"FinancePage",setup(C){const v=b(!1),a=b(null),s=b([]),r=b(""),t=b(null),n=b(null),w=()=>{a.value=null,v.value=!0},x=o=>{a.value={...o},v.value=!0},i=o=>{const d=s.value.findIndex(D=>D.id===o.id);d>-1?s.value[d]=o:s.value.unshift(o),v.value=!1,c()},e=o=>{o&&(s.value=s.value.filter(d=>d.id!==o),c())},c=()=>{localStorage.setItem("account_records",JSON.stringify(s.value))};L(()=>{const o=localStorage.getItem("account_records");o&&(s.value=JSON.parse(o))});const u=$(()=>s.value.filter(o=>{const d=!r.value||o.summary.includes(r.value)||o.note&&o.note.includes(r.value),D=!t.value||o.type===t.value;let _=!0;if(n.value&&n.value.length===2){const[Y,M]=n.value;_=o.date>=Y&&o.date<=M}return d&&D&&_}));return(o,d)=>{const D=f("el-button");return V(),R("div",me,[p("div",ce,[p("div",_e,[l(I(N),{class:"w-6 h-6 text-blue-500"}),d[4]||(d[4]=p("h1",{class:"text-2xl font-bold"},"記帳本",-1))]),l(D,{type:"primary",onClick:w},{default:m(()=>[l(I(P),{class:"w-4 h-4 mr-1"}),d[5]||(d[5]=k(" 新增記帳 "))]),_:1,__:[5]})]),l(G,{keyword:r.value,"onUpdate:keyword":d[0]||(d[0]=_=>r.value=_),type:t.value,"onUpdate:type":d[1]||(d[1]=_=>t.value=_),dateRange:n.value,"onUpdate:dateRange":d[2]||(d[2]=_=>n.value=_)},null,8,["keyword","type","dateRange"]),l(X,{modelValue:v.value,"onUpdate:modelValue":d[3]||(d[3]=_=>v.value=_),record:a.value,onSave:i},null,8,["modelValue","record"]),l(pe,{records:u.value},null,8,["records"]),u.value.length===0?(V(),R("div",ve," 尚無任何記帳紀錄，點擊新增記帳開始吧！ ")):(V(),z(oe,{key:1,records:u.value,onEdit:x,onDelete:e},null,8,["records"]))])}}});export{xe as default};
