import{n as F,p as $}from"./elementPlus-BIrCDVld.js";import{d as O,b as D,X as z,w as A,H as J,I as a,ag as i,o as f,Q as l,M as r,a as m,r as b,n as T,c as y,u as I,P as E,a6 as M,K as P,O as g,D as h}from"./vue-BG4hBqFv.js";import{_ as H}from"./index-Cs2drSQK.js";const K={class:"flex justify-end gap-2"},L=O({__name:"AccountFormDialog",props:{modelValue:{type:Boolean},record:{}},emits:["update:modelValue","save"],setup(k,{emit:p}){const _=k,d=p,v=D({get:()=>_.modelValue,set:t=>d("update:modelValue",t)}),o=z({id:Date.now(),date:new Date().toISOString().split("T")[0],summary:"",type:"支出",amount:0,note:""}),x=D(()=>!!_.record);A(()=>_.record,t=>{t?Object.assign(o,{...t}):Object.assign(o,{id:Date.now(),date:new Date().toISOString().split("T")[0],summary:"",type:"支出",amount:0,note:""})},{immediate:!0});const V=()=>{d("save",{...o}),v.value=!1},s=()=>{v.value=!1};return(t,e)=>{const n=i("el-date-picker"),c=i("el-form-item"),w=i("el-input"),C=i("el-radio"),N=i("el-radio-group"),U=i("el-input-number"),j=i("el-form"),S=i("el-button"),B=i("el-dialog");return f(),J(B,{modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=u=>v.value=u),title:x.value?"編輯記帳":"新增記帳",width:"500px",onClose:s},{footer:a(()=>[m("div",K,[l(S,{onClick:s},{default:a(()=>e[8]||(e[8]=[r("取消")])),_:1,__:[8]}),l(S,{type:"primary",onClick:V},{default:a(()=>e[9]||(e[9]=[r("儲存")])),_:1,__:[9]})])]),default:a(()=>[l(j,{model:o,"label-width":"80px",class:"space-y-2"},{default:a(()=>[l(c,{label:"日期"},{default:a(()=>[l(n,{modelValue:o.date,"onUpdate:modelValue":e[0]||(e[0]=u=>o.date=u),type:"date",placeholder:"選擇日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(c,{label:"摘要"},{default:a(()=>[l(w,{modelValue:o.summary,"onUpdate:modelValue":e[1]||(e[1]=u=>o.summary=u),placeholder:"輸入摘要"},null,8,["modelValue"])]),_:1}),l(c,{label:"類型"},{default:a(()=>[l(N,{modelValue:o.type,"onUpdate:modelValue":e[2]||(e[2]=u=>o.type=u)},{default:a(()=>[l(C,{value:"支出"},{default:a(()=>e[6]||(e[6]=[r("支出")])),_:1,__:[6]}),l(C,{value:"收入"},{default:a(()=>e[7]||(e[7]=[r("收入")])),_:1,__:[7]})]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"金額"},{default:a(()=>[l(U,{modelValue:o.amount,"onUpdate:modelValue":e[3]||(e[3]=u=>o.amount=u),min:1,step:10,placeholder:"輸入金額",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(c,{label:"備註"},{default:a(()=>[l(w,{modelValue:o.note,"onUpdate:modelValue":e[4]||(e[4]=u=>o.note=u),type:"textarea",placeholder:"輸入備註",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),Q=H(L,[["__scopeId","data-v-d52e2889"]]),R={class:"p-4"},X={class:"flex justify-between items-center mb-4"},q={class:"flex items-center space-x-2"},G={key:0,class:"text-gray-500 mt-10 text-center"},W={key:1,class:"mt-6 space-y-3"},Y={class:"text-sm text-gray-500"},Z={class:"font-semibold"},ee={key:0,class:"text-xs text-gray-400 mt-1"},te={class:"flex space-x-2"},se=O({__name:"FinancePage",setup(k){const p=b(!1),_=b(null),d=b([]),v=()=>{_.value=null,p.value=!0},o=s=>{_.value={...s},p.value=!0},x=s=>{const t=d.value.findIndex(e=>e.id===s.id);t>-1?d.value[t]=s:d.value.unshift(s),p.value=!1,localStorage.setItem("account_records",JSON.stringify(d.value))},V=s=>{s&&(d.value=d.value.filter(t=>t.id!==s),localStorage.setItem("account_records",JSON.stringify(d.value)))};return T(()=>{const s=localStorage.getItem("account_records");s&&(d.value=JSON.parse(s))}),(s,t)=>{const e=i("el-button");return f(),y("div",R,[m("div",X,[m("div",q,[l(I(F),{class:"w-6 h-6 text-blue-500"}),t[1]||(t[1]=m("h1",{class:"text-2xl font-bold"},"記帳本",-1))]),l(e,{type:"primary",onClick:v},{default:a(()=>[l(I($),{class:"w-4 h-4 mr-1"}),t[2]||(t[2]=r(" 新增記帳 "))]),_:1,__:[2]})]),l(Q,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=n=>p.value=n),record:_.value,onSave:x},null,8,["modelValue","record"]),d.value.length===0?(f(),y("div",G," 尚無任何記帳紀錄，點擊新增記帳開始吧！ ")):(f(),y("div",W,[(f(!0),y(E,null,M(d.value,n=>(f(),y("div",{key:n.id,class:"p-4 border rounded shadow-sm bg-white dark:bg-gray-800 dark:border-gray-700 flex justify-between items-center"},[m("div",null,[m("p",Y,g(n.date),1),m("p",Z,[r(g(n.summary)+" ",1),m("span",{class:h({"text-red-500":n.type==="支出","text-green-600":n.type==="收入"})},g(n.type==="支出"?"-":"+")+g(n.amount)+" 元 ",3)]),n.note?(f(),y("p",ee," 備註："+g(n.note),1)):P("",!0)]),m("div",te,[l(e,{size:"small",onClick:c=>o(n)},{default:a(()=>t[3]||(t[3]=[r("編輯")])),_:2,__:[3]},1032,["onClick"]),l(e,{type:"danger",size:"small",onClick:c=>V(n.id)},{default:a(()=>t[4]||(t[4]=[r(" 刪除 ")])),_:2,__:[4]},1032,["onClick"])])]))),128))]))])}}});export{se as default};
