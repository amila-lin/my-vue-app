import{d as F,r as n,b as C,p as H,c as o,a as t,K as p,J as k,aD as z,O as a,ak as T,P as I,a6 as $,o as r,D as K,M as w}from"./vue-5klyxRfl.js";const G={class:"max-w-3xl mx-auto mt-5 p-4 sm:p-6 text-center dark:bg-black/95 dark:text-white/90"},R={class:"space-y-6"},W={class:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-2"},X={key:0},Y={key:1},Z={key:0,class:"space-y-6 text-left"},q={class:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 space-y-2 sm:space-y-0"},ee={class:"text-sm text-gray-500 dark:text-gray-400"},te={class:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 space-y-2 sm:space-y-0"},le={key:1,class:"space-y-4 text-left"},se=["onUpdate:modelValue","disabled"],ae={class:"flex flex-col sm:flex-row justify-end gap-2 mt-4"},oe={key:0,class:"mt-4"},re={class:"mt-6"},ne={class:"space-y-2 text-left"},ue={key:0,class:"text-yellow-500"},ce=F({__name:"MathPage",setup(ie){const g=n("+"),f=n(2),m=n(5),d=n([]),b=n(!1),i=n(!1),h=n(null),S=n(null),x=n(0),c=n(!1),v=n([]),_=C(()=>[1,1,2,3,4,2][f.value-1]||1),M=C(()=>[1,2,3,4,5,7][f.value-1]||2),D=C(()=>d.value.filter(s=>s.correct).length),A=s=>{switch(s){case"*":return"x";case"/":return"÷";default:return s}},y=s=>{const e=Math.pow(10,s-1),l=Math.pow(10,s)-1;return Math.floor(Math.random()*(l-e+1))+e},N=()=>{let s=y(_.value),e=y(M.value);const l=g.value;if(l==="/"){for(;e===0;)e=y(M.value);s=e*y(_.value)}l==="-"&&s<e&&([s,e]=[e,s]);const u={"+":s+e,"-":s-e,"*":s*e,"/":s/e}[l];return u===0||u===1?N():{a:s,b:e,op:l,answer:u,userAnswer:null,correct:!1}},L=()=>{if(m.value<3||m.value>50){alert("題目數量需介於 3 到 50 題！");return}d.value=Array.from({length:m.value},()=>N()),b.value=!0,i.value=!1,x.value=0,E()},O=()=>{d.value.forEach(s=>{s.correct=Number(s.userAnswer)===s.answer}),i.value=!0,Q(),v.value.unshift({date:new Date().toLocaleString(),operation:J(g.value),correct:D.value,total:d.value.length,time:x.value}),v.value=v.value.slice(0,10),localStorage.setItem("math_quiz_history",JSON.stringify(v.value))},U=()=>{b.value=!1,d.value=[],i.value=!1},E=()=>{S.value=Date.now(),h.value=setInterval(()=>{x.value=Math.floor((Date.now()-(S.value||0))/1e3)},1e3)},Q=()=>{h.value!==null&&clearInterval(h.value)},V=s=>{const e=Math.floor(s/60),l=s%60;return`${e} 分 ${l} 秒`},j=()=>{c.value=!c.value,document.documentElement.classList.toggle("dark",c.value),localStorage.setItem("math_quiz_dark_mode",c.value?"1":"0")},B=()=>{const s=d.value.map((l,u)=>`${u+1}. ${l.a} ${l.op} ${l.b} = ______`).join(`
`),e=window.open("","","width=600,height=800");e&&(e.document.write("<pre>"+s+"</pre>"),e.print(),e.close())},J=s=>({"+":"加法","-":"減法","*":"乘法","/":"除法"})[s]||s;return H(()=>{const s=localStorage.getItem("math_quiz_dark_mode")==="1";c.value=s,document.documentElement.classList.toggle("dark",s);const e=localStorage.getItem("math_quiz_history");e&&(v.value=JSON.parse(e))}),(s,e)=>(r(),o("div",G,[e[14]||(e[14]=t("h1",{class:"text-3xl font-bold mb-6"},"國小數學運算練習系統",-1)),t("div",R,[t("div",W,[t("button",{onClick:j,class:"w-full sm:w-auto px-4 py-2 border rounded hover:bg-gray-100 dark:hover:bg-gray-700"},[c.value?(r(),o("span",X,"🌞 切換光照模式")):(r(),o("span",Y,"🌙 切換深色模式"))]),b.value&&!i.value?(r(),o("button",{key:0,onClick:B,class:"w-full sm:w-auto px-4 py-2 border rounded hover:bg-gray-100 dark:hover:bg-gray-700"}," 🖨️ 列印題目 ")):p("",!0)]),b.value?(r(),o("div",le,[(r(!0),o(I,null,$(d.value,(l,u)=>(r(),o("div",{key:u,class:"flex flex-col sm:flex-row sm:items-center space-y-1 sm:space-y-0 sm:space-x-2"},[t("span",null,a(u+1)+".",1),t("span",null,a(l.a)+" "+a(A(l.op))+" "+a(l.b)+" =",1),k(t("input",{type:"number","onUpdate:modelValue":P=>l.userAnswer=P,disabled:i.value,class:"w-full sm:w-24 p-2 text-base border rounded dark:bg-gray-800 dark:border-gray-600"},null,8,se),[[T,l.userAnswer]]),i.value?(r(),o("span",{key:0,class:K(l.correct?"text-green-500":"text-red-500")}," （"+a(l.correct?"正確":"錯誤")+"，答案："+a(l.answer)+"） ",3)):p("",!0)]))),128)),t("div",ae,[i.value?p("",!0):(r(),o("button",{key:0,onClick:O,class:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"}," 結束練習 ")),t("button",{onClick:U,class:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700"},a(i.value?"重新開始":"重新選擇練習項目"),1)]),i.value?(r(),o("div",oe,[e[8]||(e[8]=t("h3",{class:"text-xl font-bold"},"批改結果：",-1)),t("p",null,"正確 "+a(D.value)+" / "+a(d.value.length)+" 題",1),t("p",null,"作答時間："+a(V(x.value)),1)])):p("",!0)])):(r(),o("div",Z,[t("div",null,[e[4]||(e[4]=t("label",{class:"block font-semibold mb-1"},"選擇練習項目：",-1)),k(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>g.value=l),class:"w-full border p-2 rounded dark:bg-gray-800 dark:border-gray-600"},e[3]||(e[3]=[t("option",{value:"+"},"加法",-1),t("option",{value:"-"},"減法",-1),t("option",{value:"*"},"乘法",-1),t("option",{value:"/"},"除法",-1)]),512),[[z,g.value]])]),t("div",q,[e[6]||(e[6]=t("div",{class:"font-semibold min-w-[100px]"},"難度等級：",-1)),k(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>f.value=l),class:"w-full sm:w-auto border p-2 rounded dark:bg-gray-800 dark:border-gray-600"},e[5]||(e[5]=[t("option",{value:1},"🐣 1位數",-1),t("option",{value:2},"🐥 1~2位數",-1),t("option",{value:3},"✨ 2~3位數",-1),t("option",{value:4},"🚀 3~4位數",-1),t("option",{value:5},"🌟 4~5位數",-1),t("option",{value:6},"🔥 2~7位數（高手挑戰）",-1)]),512),[[z,f.value,void 0,{number:!0}]]),t("p",ee," 出題範圍："+a(_.value)+" 位數 ～ "+a(M.value)+" 位數 ",1)]),t("div",te,[e[7]||(e[7]=t("label",{class:"font-semibold sm:flex-shrink-0"},"題目數量（3～50）：",-1)),k(t("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=l=>m.value=l),min:"3",max:"50",class:"flex-1 border p-2 rounded dark:bg-gray-800 dark:border-gray-600"},null,512),[[T,m.value,void 0,{number:!0}]])]),t("button",{onClick:L,class:"w-full bg-blue-600 text-white py-3 rounded hover:bg-blue-700 text-lg"}," 開始練習 ")])),t("div",re,[e[13]||(e[13]=t("h2",{class:"text-2xl font-bold mb-4"},"最近 10 筆紀錄",-1)),t("ul",ne,[(r(!0),o(I,null,$(v.value,(l,u)=>(r(),o("li",{key:u,class:"p-4 border rounded dark:bg-gray-800"},[t("p",null,[e[9]||(e[9]=t("strong",null,"日期：",-1)),w(a(l.date),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"運算方式：",-1)),w(a(l.operation),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"正確數量：",-1)),w(a(l.correct)+" / "+a(l.total)+" ",1),l.correct===l.total?(r(),o("strong",ue,"🏅 100 分！")):p("",!0)]),t("p",null,[e[12]||(e[12]=t("strong",null,"時間：",-1)),w(a(V(l.time)),1)])]))),128))])])])]))}});export{ce as default};
