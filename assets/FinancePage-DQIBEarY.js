import{n as F,p as T}from"./elementPlus-DDewDuRR.js";import{d as w,b as S,X as h,w as z,H as O,I as s,al as r,o as p,Q as l,M as _,a as m,c as f,P as A,a6 as L,K as M,O as b,D as Y,r as k,n as E,u as I}from"./vue-CI_e83Zz.js";import{_ as W}from"./index-NnfS8rWC.js";const J={class:"flex justify-end gap-2"},P=w({__name:"AccountFormDialog",props:{modelValue:{type:Boolean},record:{}},emits:["update:modelValue","save"],setup(V,{emit:i}){const n=V,o=i,d=S({get:()=>n.modelValue,set:a=>o("update:modelValue",a)}),t=h({id:Date.now(),date:new Date().toISOString().split("T")[0],summary:"",type:"支出",amount:0,note:""}),v=S(()=>!!n.record);z(()=>n.record,a=>{a?Object.assign(t,{...a}):Object.assign(t,{id:Date.now(),date:new Date().toISOString().split("T")[0],summary:"",type:"支出",amount:0,note:""})},{immediate:!0});const x=()=>{o("save",{...t}),d.value=!1},y=()=>{d.value=!1};return(a,e)=>{const g=r("el-date-picker"),c=r("el-form-item"),D=r("el-input"),C=r("el-radio"),U=r("el-radio-group"),N=r("el-input-number"),j=r("el-form"),$=r("el-button"),B=r("el-dialog");return p(),O(B,{modelValue:d.value,"onUpdate:modelValue":e[5]||(e[5]=u=>d.value=u),title:v.value?"編輯記帳":"新增記帳",width:"500px",onClose:y},{footer:s(()=>[m("div",J,[l($,{onClick:y},{default:s(()=>e[8]||(e[8]=[_("取消")])),_:1,__:[8]}),l($,{type:"primary",onClick:x},{default:s(()=>e[9]||(e[9]=[_("儲存")])),_:1,__:[9]})])]),default:s(()=>[l(j,{model:t,"label-width":"80px",class:"space-y-2"},{default:s(()=>[l(c,{label:"日期"},{default:s(()=>[l(g,{modelValue:t.date,"onUpdate:modelValue":e[0]||(e[0]=u=>t.date=u),type:"date","value-format":"YYYY-MM-DD",placeholder:"選擇日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(c,{label:"摘要"},{default:s(()=>[l(D,{modelValue:t.summary,"onUpdate:modelValue":e[1]||(e[1]=u=>t.summary=u),placeholder:"輸入摘要"},null,8,["modelValue"])]),_:1}),l(c,{label:"類型"},{default:s(()=>[l(U,{modelValue:t.type,"onUpdate:modelValue":e[2]||(e[2]=u=>t.type=u)},{default:s(()=>[l(C,{label:"支出"},{default:s(()=>e[6]||(e[6]=[_("支出")])),_:1,__:[6]}),l(C,{label:"收入"},{default:s(()=>e[7]||(e[7]=[_("收入")])),_:1,__:[7]})]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"金額"},{default:s(()=>[l(N,{modelValue:t.amount,"onUpdate:modelValue":e[3]||(e[3]=u=>t.amount=u),min:1,step:10,placeholder:"輸入金額",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(c,{label:"備註"},{default:s(()=>[l(D,{modelValue:t.note,"onUpdate:modelValue":e[4]||(e[4]=u=>t.note=u),type:"textarea",placeholder:"輸入備註",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),R=W(P,[["__scopeId","data-v-b8105910"]]),H={class:"mt-6 space-y-3"},K={class:"text-sm text-gray-500"},Q={class:"font-semibold"},X={key:0,class:"text-xs text-gray-400 mt-1"},q={class:"flex space-x-2"},G=w({__name:"AccountRecordList",props:{records:{}},emits:["edit","delete"],setup(V){const i=n=>{const d=new Date(n).toLocaleDateString("zh-TW",{weekday:"long"});return`${n}（${d}）`};return(n,o)=>{const d=r("el-button");return p(),f("div",H,[(p(!0),f(A,null,L(n.records,t=>(p(),f("div",{key:t.id,class:"p-4 border rounded shadow-sm bg-white dark:bg-gray-800 dark:border-gray-700 flex justify-between items-center"},[m("div",null,[m("p",K,b(i(t.date)),1),m("p",Q,[_(b(t.summary)+" ",1),m("span",{class:Y({"text-red-500":t.type==="支出","text-green-600":t.type==="收入"})},b(t.type==="支出"?"-":"+")+b(t.amount)+" 元 ",3)]),t.note?(p(),f("p",X," 備註："+b(t.note),1)):M("",!0)]),m("div",q,[l(d,{size:"small",onClick:v=>n.$emit("edit",t)},{default:s(()=>o[0]||(o[0]=[_("編輯")])),_:2,__:[0]},1032,["onClick"]),l(d,{type:"danger",size:"small",onClick:v=>n.$emit("delete",t.id)},{default:s(()=>o[1]||(o[1]=[_(" 刪除 ")])),_:2,__:[1]},1032,["onClick"])])]))),128))])}}}),Z={class:"p-4"},ee={class:"flex justify-between items-center mb-4"},te={class:"flex items-center space-x-2"},le={key:0,class:"text-gray-500 mt-10 text-center"},ne=w({__name:"FinancePage",setup(V){const i=k(!1),n=k(null),o=k([]),d=()=>{n.value=null,i.value=!0},t=a=>{n.value={...a},i.value=!0},v=a=>{const e=o.value.findIndex(g=>g.id===a.id);e>-1?o.value[e]=a:o.value.unshift(a),i.value=!1,y()},x=a=>{a&&(o.value=o.value.filter(e=>e.id!==a),y())},y=()=>{localStorage.setItem("account_records",JSON.stringify(o.value))};return E(()=>{const a=localStorage.getItem("account_records");a&&(o.value=JSON.parse(a))}),(a,e)=>{const g=r("el-button");return p(),f("div",Z,[m("div",ee,[m("div",te,[l(I(F),{class:"w-6 h-6 text-blue-500"}),e[1]||(e[1]=m("h1",{class:"text-2xl font-bold"},"記帳本",-1))]),l(g,{type:"primary",onClick:d},{default:s(()=>[l(I(T),{class:"w-4 h-4 mr-1"}),e[2]||(e[2]=_(" 新增記帳 "))]),_:1,__:[2]})]),l(R,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=c=>i.value=c),record:n.value,onSave:v},null,8,["modelValue","record"]),o.value.length===0?(p(),f("div",le," 尚無任何記帳紀錄，點擊新增記帳開始吧！ ")):(p(),O(G,{key:1,records:o.value,onEdit:t,onDelete:x},null,8,["records"]))])}}});export{ne as default};
